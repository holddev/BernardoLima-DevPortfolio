---
import type { Project } from "../constants/consts";
import ExternalLink from "./icons/ExternalLink.astro";
import Github from "./icons/Github.astro";
import Link from "./icons/Link.astro";

interface Props {
  id: string;
  proyect: Project;
}
const { id } = Astro.props;
const { name, description, image, tech, github, link } = Astro.props.proyect;
---

<div
  class="bg-gradient-to-b from-black via-black to-primary/10
  rounded-lg hover:scale-[1.015] overflow-hidden group
  shadow-sm hover:shadow-primary transition-all duration-500 w-full"
>
  <article class="relative w-full h-auto">
    <div
      class="relative w-full h-full flex items-start justify-start overflow-hidden"
    >
      <img
        src={image}
        alt={name}
        class="w-full h-[190px] lg:h-[160px] group-hover:scale-[1.04] object-cover transition duration-500"
        loading="lazy"
      />
      <div
        class="absolute inset-0 w-full h-full bg-gradient-to-t from-black/80 via-transparent to-transparent"
      >
      </div>
      <div
        class="absolute top-2 right-2 z-10
    flex items-center gap-2
    opacity-0 group-hover:opacity-100 transition duration-300"
      >
        <a
          class="rounded-full bg-black p-1"
          href={github}
          target="_blank"
          title="Ir al código"
        >
          <Github class="size-4 text-white" />
        </a>
        <a
          class="rounded-full bg-primary/80 p-1"
          href={link}
          target="_blank"
          title="Ir al demo"
        >
          <ExternalLink class="size-4 text-white" />
        </a>
      </div>
      <span
        class="absolute bottom-2 left-2 size-6 p-1 border-1 rounded-full text-xs font-semibold
      grid place-content-center text-primary bg-primary/20 border-primary/70"
        >{id}</span
      >
    </div>
    <div class="w-full px-4 pb-4">
      <h4 class="font-bold group-hover:text-primary">{name}</h4>
      <p
        class="pt-2 text-pretty text-sm text-foreground/80 line-clamp-3 max-h-40"
      >
        {description}
      </p>
      <ul class="flex justify-start items-center gap-3 pt-3">
        {
          tech.map(({ icon: Icon, name, color }) => (
            <li
              class=" flex items-center justify-center gap-1 
            rounded-full px-2 py-1"
              style={{ backgroundColor: color || "#E5E7EB" }}
            >
              <Icon class="size-4" />
              <span class="text-xs whitespace-nowrap">{name}</span>
            </li>
          ))
        }
      </ul>
      <ul class="flex gap-3 justify-center pt-6">
        {
          github && (
            <li class="w-full">
              {" "}
              <a
                class="flex gap-1 items-center justify-center
            py-1 px-2 rounded-md border-[1px] border-primary/70
            scale-100 hover:scale-105 transition-all duration-300
            text-primary/70 hover:bg-primary/10"
                href={github}
                aria-label="Ir al código"
                rel="noopener nooferrer"
                target="_blank"
              >
                <Github class="size-4" /> Código
              </a>
            </li>
          )
        }
        {
          link && (
            <li class="w-full">
              {" "}
              <a
                class="flex gap-1 items-center justify-center
            py-1 px-2 rounded-md border-[1px] border-[#7a7878]
            scale-100 hover:scale-105 transition-all duration-300
            bg-primary/70 hover:bg-primary/60"
                href={link}
                aria-label="Ir al demo"
                rel="noopener nooferrer"
                target="_blank"
              >
                <Link class="size-4 text-foreground" /> Preview
              </a>
            </li>
          )
        }
      </ul>
    </div>
  </article>
</div>
